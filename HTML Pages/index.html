<!DOCTYPE html>
<html lang="en">

    <head>

        <!-- Basic Page Needs
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <meta charset="utf-8">
        <title>Your page title here :)</title>
        <meta name="description" content="">
        <meta name="author" content="">
      
        <!-- Mobile Specific Metas
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
      
        <!-- FONT
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
      
        <!-- CSS
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/skeleton.css">
      
        <!-- Favicon
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <link rel="icon" type="image/png" href="images/favicon.png">
      
      </head>

 <body>  

    <div class="container mt-4">
        <br>
            
            <button class="btn btn-primary mt-2" id="getAll">Get All Products</button>
            <table class="u-full-width">
                <thead>
                  <tr>
                    <th>Nombre Producto</th>
                    <th>Imagen</th>
                    <th>Precio</th>
                    <th>Id</th>
                  </tr>
                </thead>
                <tbody id="data">
                </tbody>
              </table>

       </br>


        <button class="btn btn-primary mt-2" id="Post">Add/Post Product</button>
        <button class="btn btn-primary mt-2" id="Put">Update</button>
        <button class="btn btn-primary mt-2" id="Delete">Delete</button>

    </div>
</br>

<div>
    
        <form>
            <div class="row">
              <div class="six columns">
                <input class="u-half-width" type="text" placeholder="Id" id="Get By Id"> 
                </label>
                <input type="submit" value="Enviar Id" id="getById" input>
          </form>

</div>

    <script>

   
        getAll.onclick = () => {

        fetch("http://localhost:8080/api")
        .then(resp => resp.json())
        .then(data => mostrarData(data))
        
        const mostrarData = (data) => {
            console.log(data)
            let body = ''
            for (i = 0; i < data.length; i++) {
                body += `<tr><td>${data[i].name}</td><td>
                         <tr><td>${data[i].imageUrl}</td><td>
                         <tr><td>${data[i].price}</td><td>
                         <tr><td>${data[i].id}</td><td>`
          }
          document.getElementById('data').innerHTML= body
          }
        }
        
        
        

         getById.onclick = () => {
        fetch("http://localhost:8080/api/2").then(resp => resp.json()).then(data => {
            console.log(data)
        })
       }

        Post.onclick = () => { 

        fetch("http://localhost:8080/api/", {
        method: "POST",
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            product: {
                name: "Producto2",
                imageUrl: "https://i.ibb.co/QdJwgmp/brown-cowboy.png",
                price: 12345,
                    }
                })
            }).then((resp) =>resp.json()).then(data=>{
                            console.log(data);
            });
        }

      Put.onclick = () => {
                fetch("http://localhost:8080/api/4").then(resp => resp.json()).then(data => {
                    console.log(data)
                })
            }

            Delete.onclick = () => {
                fetch("http://localhost:8080/api/4").then(resp => resp.json()).then(data => {
                    console.log(data)
                })
            }
        
     
    </script>
</body>

</html>
